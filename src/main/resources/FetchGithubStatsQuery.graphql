query ($orgName: String!, $teamCursor: String, $repoCursor: String, $vulnCursor: String) {
  rateLimit {
    remaining
  }
  organization(login: $orgName) {
    teams(first: 10, after: $teamCursor) {
      nodes {
        name
        repositories(first: 100, after: $repoCursor) {
          nodes {
            name
            isArchived
            pushedAt
            hasVulnerabilityAlertsEnabled
            vulnerabilityAlerts(states: OPEN, first: 100, after: $vulnCursor) {
              nodes {
                createdAt
                dependencyScope
                securityVulnerability {
                  severity
                }
              }
              pageInfo {
                endCursor
                hasNextPage
              }
            }
          }
          pageInfo {
            endCursor
            hasNextPage
          }
        }
      }
      pageInfo {
        endCursor
        hasNextPage
      }
    }
  }
}
