query (
  $orgName: String!
  $teamsEndCursor: String
  $repoEndCursor: String
) {
  rateLimit {
    remaining
  }
  organization(login: $orgName) {
    teams(
      first: 15
      after: $teamsEndCursor
      orderBy: { field: NAME, direction: ASC }
    ) {
      totalCount
      nodes {
        id
        name
        slug
        repositories(
          first: 100
          after: $repoEndCursor
          orderBy: { field: CREATED_AT, direction: ASC }
        ) {
          totalCount
          nodes {
            id
            name
            isArchived
            pushedAt
            hasVulnerabilityAlertsEnabled
            vulnerabilityAlerts(states: OPEN) {
              totalCount
            }
          }
          pageInfo {
            hasNextPage
            endCursor
          }
        }
      }
      pageInfo {
        hasNextPage
        endCursor
      }
    }
  }
}
